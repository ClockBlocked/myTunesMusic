<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyTunes Debug Script Test</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: #1f2329;
            color: #ffffff;
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            padding: 30px 0;
            border-bottom: 2px solid #333;
            margin-bottom: 30px;
        }
        .header h1 {
            color: #3b82f6;
            margin: 0;
            font-size: 2.5em;
        }
        .header p {
            margin: 10px 0 0 0;
            color: #9ca3af;
            font-size: 1.1em;
        }
        .section {
            background: #2d3748;
            border-radius: 8px;
            padding: 25px;
            margin: 20px 0;
            border-left: 4px solid #3b82f6;
        }
        .section h2 {
            color: #60a5fa;
            margin-top: 0;
            font-size: 1.5em;
        }
        .command {
            background: #1a202c;
            border: 1px solid #4a5568;
            border-radius: 4px;
            padding: 12px;
            font-family: 'Courier New', monospace;
            color: #68d391;
            margin: 10px 0;
            overflow-x: auto;
        }
        .button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin: 8px 8px 8px 0;
            transition: all 0.2s;
        }
        .button:hover {
            background: #2563eb;
            transform: translateY(-1px);
        }
        .button.secondary {
            background: #6b7280;
        }
        .button.secondary:hover {
            background: #4b5563;
        }
        .button.danger {
            background: #ef4444;
        }
        .button.danger:hover {
            background: #dc2626;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .status {
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }
        .status.info {
            background: #1e3a8a20;
            border: 1px solid #3b82f6;
            color: #93c5fd;
        }
        .status.success {
            background: #14532d20;
            border: 1px solid #10b981;
            color: #6ee7b7;
        }
        .status.warning {
            background: #92400e20;
            border: 1px solid #f59e0b;
            color: #fcd34d;
        }
        .code-block {
            background: #111827;
            border: 1px solid #374151;
            border-radius: 6px;
            padding: 20px;
            margin: 15px 0;
            overflow-x: auto;
        }
        .code-block pre {
            margin: 0;
            color: #e5e7eb;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        .highlight {
            color: #fbbf24;
            font-weight: bold;
        }
        footer {
            text-align: center;
            padding: 40px 0;
            border-top: 1px solid #333;
            margin-top: 50px;
            color: #6b7280;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéµ MyTunes Debug Script Test</h1>
            <p>Professional debugging utilities for the MyTunes music application</p>
        </div>

        <div class="status info">
            <strong>üìç Getting Started:</strong> Open your browser's Developer Console (F12) and run any of the commands below to test the debugging capabilities.
        </div>

        <div class="section">
            <h2>üöÄ Quick Start Commands</h2>
            <p>These are the most commonly used debug functions:</p>
            
            <div class="grid">
                <div>
                    <h3>Full System Analysis</h3>
                    <div class="command">MyTunesDebugger.runFullDiagnostic()</div>
                    <button class="button" onclick="runDiagnostic()">Run Full Diagnostic</button>
                    <p>Performs a comprehensive analysis of all app systems.</p>
                </div>
                
                <div>
                    <h3>Quick Health Check</h3>
                    <div class="command">MyTunesDebugger.quickHealthCheck()</div>
                    <button class="button" onclick="runHealthCheck()">Run Health Check</button>
                    <p>Quick verification of critical app components.</p>
                </div>
                
                <div>
                    <h3>Audio System Analysis</h3>
                    <div class="command">MyTunesDebugger.audioDebugger.analyzeAudioState()</div>
                    <button class="button" onclick="analyzeAudio()">Analyze Audio</button>
                    <p>Detailed analysis of the audio playback system.</p>
                </div>
                
                <div>
                    <h3>Show Help</h3>
                    <div class="command">MyTunesDebugger.help()</div>
                    <button class="button secondary" onclick="showHelp()">Show Help</button>
                    <p>Display complete command reference and usage guide.</p>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üîß Focused Debugging Tools</h2>
            
            <div class="grid">
                <div>
                    <h3>Core System</h3>
                    <button class="button" onclick="runCommand('MyTunesDebugger.coreDebugger.analyzeAppState()')">App State</button>
                    <button class="button" onclick="runCommand('MyTunesDebugger.coreDebugger.validateDOMElements()')">DOM Elements</button>
                    <button class="button" onclick="runCommand('MyTunesDebugger.coreDebugger.checkEventListeners()')">Event Listeners</button>
                </div>
                
                <div>
                    <h3>Audio System</h3>
                    <button class="button" onclick="runCommand('MyTunesDebugger.audioDebugger.testAudioFormats()')">Format Support</button>
                    <button class="button" onclick="runCommand('MyTunesDebugger.audioDebugger.monitorAudioEvents()')">Monitor Events</button>
                </div>
                
                <div>
                    <h3>UI System</h3>
                    <button class="button" onclick="runCommand('MyTunesDebugger.uiDebugger.validateUIState()')">UI State</button>
                    <button class="button" onclick="runCommand('MyTunesDebugger.uiDebugger.analyzeThemeSystem()')">Theme System</button>
                    <button class="button" onclick="runCommand('MyTunesDebugger.uiDebugger.scanForDeadLinks()')">Dead Links</button>
                </div>
                
                <div>
                    <h3>Performance</h3>
                    <button class="button" onclick="runCommand('MyTunesDebugger.performanceMonitor.start()')">Start Monitor</button>
                    <button class="button" onclick="runCommand('MyTunesDebugger.performanceMonitor.getReport()')">Get Report</button>
                    <button class="button secondary" onclick="runCommand('MyTunesDebugger.performanceMonitor.stop()')">Stop Monitor</button>
                </div>
                
                <div>
                    <h3>Network</h3>
                    <button class="button" onclick="runCommand('MyTunesDebugger.networkDebugger.analyzeConnectionStatus()')">Connection</button>
                    <button class="button" onclick="runCommand('MyTunesDebugger.networkDebugger.monitorRequests()')">Monitor Requests</button>
                    <button class="button" onclick="runCommand('MyTunesDebugger.networkDebugger.testCORS()')">Test CORS</button>
                </div>
                
                <div>
                    <h3>Storage</h3>
                    <button class="button" onclick="runCommand('MyTunesDebugger.storageDebugger.analyzeLocalStorage()')">Analyze Storage</button>
                    <button class="button" onclick="runCommand('MyTunesDebugger.storageDebugger.validateStorageData()')">Validate Data</button>
                    <button class="button danger" onclick="clearStorage()">Clear App Storage</button>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üìä Monitoring & Utilities</h2>
            
            <div class="grid">
                <div>
                    <h3>Error Tracking</h3>
                    <button class="button" onclick="runCommand('MyTunesDebugger.errorTracker.start()')">Start Tracking</button>
                    <button class="button" onclick="runCommand('MyTunesDebugger.errorTracker.getReport()')">Get Report</button>
                    <button class="button secondary" onclick="runCommand('MyTunesDebugger.errorTracker.stop()')">Stop Tracking</button>
                    <button class="button secondary" onclick="runCommand('MyTunesDebugger.errorTracker.clear()')">Clear History</button>
                </div>
                
                <div>
                    <h3>Service Worker</h3>
                    <button class="button" onclick="runCommand('MyTunesDebugger.serviceWorkerDebugger.analyzeServiceWorker()')">Analyze SW</button>
                    <button class="button" onclick="runCommand('MyTunesDebugger.serviceWorkerDebugger.testCacheAPI()')">Test Cache API</button>
                </div>
                
                <div>
                    <h3>Utilities</h3>
                    <button class="button secondary" onclick="runCommand('MyTunesDebugger.utils.clearConsole()')">Clear Console</button>
                    <button class="button" onclick="runCommand('MyTunesDebugger.utils.exportLogs()')">Export Logs</button>
                    <button class="button" onclick="runCommand('MyTunesDebugger.utils.startFullMonitoring()')">Start All Monitoring</button>
                    <button class="button secondary" onclick="runCommand('MyTunesDebugger.utils.stopAllMonitoring()')">Stop All Monitoring</button>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üìñ Usage Examples</h2>
            <p>Copy and paste these commands into the browser console:</p>
            
            <div class="code-block">
                <pre>
<span class="highlight">// Complete system diagnostic</span>
MyTunesDebugger.runFullDiagnostic();

<span class="highlight">// Quick health check</span>
MyTunesDebugger.quickHealthCheck();

<span class="highlight">// Analyze audio system</span>
MyTunesDebugger.audioDebugger.analyzeAudioState();

<span class="highlight">// Monitor performance</span>
MyTunesDebugger.performanceMonitor.start();
// ... wait some time ...
MyTunesDebugger.performanceMonitor.getReport();

<span class="highlight">// Start comprehensive monitoring</span>
MyTunesDebugger.utils.startFullMonitoring();

<span class="highlight">// Export debug data</span>
MyTunesDebugger.utils.exportLogs();

<span class="highlight">// Get help and command reference</span>
MyTunesDebugger.help();
                </pre>
            </div>
        </div>

        <div class="section">
            <h2>‚ö†Ô∏è Important Notes</h2>
            <div class="status warning">
                <strong>Debug Script Status:</strong> The debug script automatically loads with the application and starts error tracking by default.
            </div>
            
            <div class="status success">
                <strong>Browser Compatibility:</strong> This debug script works best in Chrome/Chromium browsers where advanced features like getEventListeners() and performance.memory are available.
            </div>
            
            <div class="status info">
                <strong>Performance:</strong> Monitoring functions are designed to be lightweight but may impact performance. Stop monitoring when not needed.
            </div>
        </div>

        <footer>
            <p>MyTunes Debug Script v1.0.0 | Professional debugging utilities for the MyTunes music application</p>
        </footer>
    </div>

    <!-- Load the debug script -->
    <script src="./siteScripts/utilities/debugScript.js"></script>

    <script>
        // Mock some basic app state for testing
        if (!window.appState) {
            window.appState = {
                audio: new Audio(),
                currentSong: null,
                currentArtist: null,
                currentAlbum: null,
                isPlaying: false,
                duration: 0,
                queue: [],
                recentlyPlayed: [],
                shuffleMode: false,
                repeatMode: 'OFF',
                isPopupVisible: false,
                currentTab: 'now-playing',
                playlists: []
            };
        }

        // Helper functions for the test buttons
        function runDiagnostic() {
            console.clear();
            console.log('üéµ Running full diagnostic...');
            if (window.MyTunesDebugger) {
                window.MyTunesDebugger.runFullDiagnostic();
            } else {
                console.error('MyTunesDebugger not loaded');
            }
        }

        function runHealthCheck() {
            console.log('üè• Running health check...');
            if (window.MyTunesDebugger) {
                window.MyTunesDebugger.quickHealthCheck();
            } else {
                console.error('MyTunesDebugger not loaded');
            }
        }

        function analyzeAudio() {
            console.log('üîä Analyzing audio system...');
            if (window.MyTunesDebugger) {
                window.MyTunesDebugger.audioDebugger.analyzeAudioState();
            } else {
                console.error('MyTunesDebugger not loaded');
            }
        }

        function showHelp() {
            if (window.MyTunesDebugger) {
                window.MyTunesDebugger.help();
            } else {
                console.error('MyTunesDebugger not loaded');
            }
        }

        function runCommand(command) {
            console.log(`üîß Running: ${command}`);
            try {
                eval(command);
            } catch (error) {
                console.error('Error running command:', error);
            }
        }

        function clearStorage() {
            if (confirm('Are you sure you want to clear app storage? This will remove all saved data.')) {
                if (window.MyTunesDebugger) {
                    window.MyTunesDebugger.storageDebugger.clearAppStorage();
                } else {
                    console.error('MyTunesDebugger not loaded');
                }
            }
        }

        // Display loading status
        window.addEventListener('load', () => {
            setTimeout(() => {
                if (window.MyTunesDebugger) {
                    console.log('‚úÖ MyTunes Debug Script loaded successfully!');
                    console.log('üìñ Try running: MyTunesDebugger.help()');
                    
                    // Show a welcome message
                    const status = document.createElement('div');
                    status.className = 'status success';
                    status.innerHTML = '<strong>‚úÖ Debug Script Loaded:</strong> The MyTunes debug script is ready! Open the Developer Console and try the commands above.';
                    document.querySelector('.header').after(status);
                } else {
                    console.error('‚ùå MyTunes Debug Script failed to load');
                    
                    const status = document.createElement('div');
                    status.className = 'status warning';
                    status.innerHTML = '<strong>‚ö†Ô∏è Debug Script Error:</strong> The debug script failed to load. Check the console for errors.';
                    document.querySelector('.header').after(status);
                }
            }, 100);
        });
    </script>
</body>
</html>